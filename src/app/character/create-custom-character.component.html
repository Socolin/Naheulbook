<mat-card>
    Ce formulaire permet de crée des personnages, étant de niveau supérieur à 1 ou ne respectant pas forcément toutes
    les restrictions des règles actuelle (personnage crée avec les règles de la 2.0 etc..). Pour les statistiques,
    il ne faut pas compter les bonus d'équipements, ou les bonus d'agilité exceptionnel / pourri.
    Ces bonus seront calculé automatiquement ensuite sur la fiche du personnage.
</mat-card>
<mat-card>
    <mat-card-title>
        Caractéristiques
    </mat-card-title>
    <mat-card-content class="stats">
        <mat-form-field>
            <input matInput
                   type="number"
                   [(ngModel)]="cou"
                   placeholder="Courage"
                   step="1"
                   min=0 />
        </mat-form-field>
        <mat-form-field>
            <input matInput
                   type="number"
                   [(ngModel)]="int"
                   placeholder="Intelligence"
                   step="1"
                   min=0 />
        </mat-form-field>
        <mat-form-field>
            <input matInput
                   type="number"
                   [(ngModel)]="cha"
                   placeholder="Charisme"
                   step="1"
                   min=0 />
        </mat-form-field>
        <mat-form-field>
            <input matInput
                   type="number"
                   [(ngModel)]="ad"
                   placeholder="Adresse"
                   step="1"
                   min=0 />
        </mat-form-field>
        <mat-form-field>
            <input matInput
                   type="number"
                   [(ngModel)]="fo"
                   placeholder="Force"
                   step="1"
                   min=0 />
        </mat-form-field>
    </mat-card-content>
</mat-card>
<mat-card class="origin-card">
    <mat-card-title>
        Origine
    </mat-card-title>
    <mat-card-content>
        <mat-form-field class="selector">
            <mat-select placeholder="Origine" [(ngModel)]="selectedOrigin" (selectionChange)="updateAvailableJobs()">
                <mat-option *ngFor="let origin of origins" [value]="origin">
                    {{origin.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </mat-card-content>
</mat-card>
<mat-card *ngIf="selectedOrigin" class="job-card">
    <mat-card-title>
        Métier(s)
    </mat-card-title>
    <mat-card-content>
        <div *ngIf="selectedJobs.length === 0">Aucun</div>
        <div *ngFor="let job of selectedJobs" class="job">
            <button mat-icon-button (click)="removeJob(job)">
                <mat-icon>delete</mat-icon>
            </button>
            {{job.name}}

            <div class="speciality" *ngFor="let speciality of specialities[job.id]">
                <button mat-icon-button (click)="removeSpeciality(job, speciality)">
                    <mat-icon>delete</mat-icon>
                </button>
                {{speciality.name}}
            </div>

            <div class="speciality">
                <mat-form-field class="speciality-selector" *ngIf="job.specialities.length > 0">
                    <mat-select placeholder="Spécialité" (selectionChange)="addSpeciality(job, $event.value)">
                        <ng-template ngFor [ngForOf]="job.specialities" let-speciality>
                            <mat-option *ngIf="!isSpecialitySelected(job, speciality)" [value]="speciality">
                                {{speciality.name}}
                            </mat-option>
                        </ng-template>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        <mat-form-field class="job-selector">
            <mat-select placeholder="Métier" (selectionChange)="addJob($event.value)">
                <ng-template ngFor [ngForOf]="availableJobs" let-job>
                    <mat-option *ngIf="!isJobSelected(job)" [value]="job">
                        {{job.name}}
                    </mat-option>
                </ng-template>
            </mat-select>
        </mat-form-field>
    </mat-card-content>
</mat-card>
<mat-card *ngIf="selectedOrigin">
    <mat-card-title>
        Compétences
    </mat-card-title>
    <mat-card-content class="skill-list">
        <ng-template ngFor [ngForOf]="knownSkills" let-skill>
            <mat-checkbox [checked]="true" [disabled]="true">
                {{skill.name}}
            </mat-checkbox>
            <span class="skill-description mat-hint">{{skill.playerDescription}}</span>
        </ng-template>
        <ng-template ngFor [ngForOf]="availableSkills" let-skill>
            <mat-checkbox>
                {{skill.name}}
            </mat-checkbox>
            <span class="skill-description mat-hint">{{skill.playerDescription}}</span>
        </ng-template>
    </mat-card-content>
</mat-card>
<mat-card>
    <mat-card-title>
        Divers
    </mat-card-title>
    <mat-card-content>
        <div class="stats">
            <mat-form-field>
                <input matInput
                       [(ngModel)]="name"
                       placeholder="Nom" />
            </mat-form-field>
        </div>
        <div class="stats">
            <mat-radio-group name="sexe" [(ngModel)]="sex">
                <mat-radio-button name="sexe" [value]="'Homme'">
                    Homme
                </mat-radio-button>
                <mat-radio-button name="sexe" [value]="'Femme'">
                    Femme
                </mat-radio-button>
            </mat-radio-group>
        </div>
        <div class="stats">
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="level"
                       placeholder="Niveau"
                       step="1"
                       min=0 />
            </mat-form-field>
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="xp"
                       placeholder="Experience"
                       step="1"
                       min=0 />
            </mat-form-field>
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="fatePoint"
                       placeholder="Point de destin"
                       step="1"
                       min=0 />
            </mat-form-field>
        </div>
        <div class="stats">
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="ev"
                       placeholder="Energie Vitale"
                       step="1"
                       min=0 />
            </mat-form-field>
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="ea"
                       placeholder="Energie Astrale"
                       step="1"
                       min=0 />
            </mat-form-field>
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="at"
                       placeholder="AT"
                       step="1"
                       min=0 />
            </mat-form-field>
            <mat-form-field>
                <input matInput
                       type="number"
                       [(ngModel)]="prd"
                       placeholder="PRD"
                       step="1"
                       min=0 />
            </mat-form-field>
        </div>
    </mat-card-content>
</mat-card>

<div class="create-button">
    <button mat-raised-button
            [disabled]="creating"
            (click)="createCustomCharacter()">
        Creer
    </button>
</div>
