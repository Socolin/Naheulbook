<div class="effect-panel">
    <mat-card class="effect-list-panel">
        <mat-card-title>
            Effets
        </mat-card-title>
        <mat-card-content>
            <div class="effect-list">
                <ng-template ngFor let-modifier [ngForOf]="character.computedData.modifiers">
                    <div *ngIf="!modifier.permanent"
                         (click)="selectModifier(modifier)"
                         class="effect-element"
                         [class.selected]="selectedModifier === modifier">
                        <div class="modifier-toggle">
                            <mat-checkbox color="primary"
                                         [disabled]="!modifier.reusable"
                                         [checked]="modifier.active"
                                         (change)="updateReusableModifier(modifier)">
                            </mat-checkbox>
                        </div>
                        <div class="modifier-info">
                            <div>
                                {{modifier.name}}
                            </div>
                            <div class="modifier-type secondary-text">
                                {{modifier.type}}
                            </div>
                        </div>
                        <div class="modifier-duration">
                            <span *ngIf="modifier.combatCount">
                                <span class="ra ra-sword duration-icon"></span>
                                {{modifier.currentCombatCount}}
                            </span>
                            <span *ngIf="modifier.currentTimeDuration">
                                <span class="ra ra-clockwork duration-icon"></span>
                                {{modifier.currentTimeDuration | nhbkShortDuration}}
                            </span>
                            <span *ngIf="modifier.currentLapCount">
                                <span class="game-icon game-icon-clockwise-rotation duration-icon"></span>
                                {{modifier.currentLapCount}}
                            </span>
                        </div>
                    </div>
                </ng-template>
            </div>
        </mat-card-content>
        <mat-card-actions align="end">
            <button mat-button color="primary" (click)="addEffectModal.open()">AJOUTER</button>
        </mat-card-actions>
    </mat-card>
    <div class="effect-detail-panel">
        <modifier-detail *ngIf="selectedModifier" [modifier]="selectedModifier" (onRemove)="removeModifier($event)">
        </modifier-detail>
    </div>
</div>


<add-effect-modal #addEffectModal (createModifier)="addCustomModifier($event)">
</add-effect-modal>
