<md-card>
    <md-card-title>Aucun</md-card-title>
    <md-card-subtitle>
        Prérequis: aucun
    </md-card-subtitle>
    <md-card-actions align="end">
        <button color="primary" md-button (click)="selectJob(null)">CHOISIR</button>
    </md-card-actions>
</md-card>
<ng-template ngFor [ngForOf]="jobs" let-job>
    <md-card *ngIf=isVisible(job) [class.disabled]="!isAvailable(job)">
        <button md-mini-fab color="primary" (click)="toggleDetail(job)">
            <md-icon *ngIf="displayDetail(job)">remove</md-icon>
            <md-icon *ngIf="!displayDetail(job)">add</md-icon>
        </button>
        <md-card-title>{{job.name}}</md-card-title>
        <md-card-subtitle>

            Prérequis:
            <ng-template ngFor [ngForOf]="job.requirements" let-req let-last="last">
                <span class="invalid-stat"    *ngIf="req.min && stats[req.stat.toLowerCase()] < req.min">
                    {{req.stat|uppercase}} &ge; {{req.min}}
                </span>
                <span class="invalid-stat"    *ngIf="req.max && stats[req.stat.toLowerCase()] > req.max">
                    {{req.stat|uppercase}} &le; {{req.max}}
                </span>
                <span class="valid-stat" *ngIf="req.min && stats[req.stat.toLowerCase()] >= req.min">
                    {{req.stat|uppercase}} &ge; {{req.min}}
                </span>
                <span class="valid-stat" *ngIf="req.max && stats[req.stat.toLowerCase()] <= req.max">
                    {{req.stat|uppercase}} &le; {{req.max}}
                </span>
                <span *ngIf="!last">,</span>
            </ng-template>
            <span *ngIf="!job.requirements.length">aucun</span>
        </md-card-subtitle>
        <md-card-content *ngIf="displayDetail(job)">
            <div class="description" [innerHTML]="job.playerDescription | textFormatter"></div>
            <div class="skills">
                Je suis né avec les compétences suivantes :
                <ul>
                    <li *ngFor="let skill of job.skills">
                        <span class="skill-name">{{skill.name}}</span>
                        <span *ngIf="skill.playerDescription"> : {{skill.playerDescription}}</span>
                    </li>
                </ul>
            </div>
        </md-card-content>
        <md-card-actions *ngIf="isAvailable(job)" align="end">
            <button color="primary" md-button (click)="selectJob(job)">CHOISIR</button>
        </md-card-actions>
    </md-card>
</ng-template>
