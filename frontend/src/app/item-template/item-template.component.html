<mat-card>
  @if (itemTemplate.source === 'community') {
    <mat-card-subtitle style="display: flex; align-items: center">
      <mat-icon>group</mat-icon>Object communautaire@if (itemTemplate.sourceUser) {
      <span>&nbsp;créé par {{itemTemplate.sourceUser}}</span>
    }
  </mat-card-subtitle>
}
@if (itemTemplate.source === 'private') {
  <mat-card-subtitle style="display: flex; align-items: center">
    <mat-icon>lock</mat-icon> Object privé
  </mat-card-subtitle>
}
<mat-card-header>
  <icon matCardAvatar [enchanted]="itemTemplate.data.enchantment !== undefined" [icon]="itemTemplate.data.icon" [size]="'40px'"></icon>
  <mat-card-title>
    {{itemTemplate.name}}
    @if (itemTemplate.data.enchantment !== undefined) {
      <span>(Ench. {{itemTemplate.data.enchantment}})</span>
    }
  </mat-card-title>
  <mat-card-subtitle>
    @if (itemTemplate.data.enchantment !== undefined) {
      <span>Enchanté </span>
    }
    @if (itemTemplate.data.requireLevel) {
      <span>Niveau {{itemTemplate.data.requireLevel}} </span>
    }
    @if (itemTemplate.data.relic) {
      <span>Relique </span>
    }
  </mat-card-subtitle>
  <span class="padding"></span>
  @if (copyable || editable || hasAction('addItem')) {
    <button mat-icon-button
      [matMenuTriggerFor]="itemTemplateMenu"
      >
      <mat-icon>more_vert</mat-icon>
    </button>
  }
  <mat-menu #itemTemplateMenu>
    <ng-template matMenuContent>
      @if (copyable) {
        <button mat-menu-item  (click)="openCreateItemTemplateDialog(itemTemplate)">
          <mat-icon>content_copy</mat-icon>
          Créer une copie
        </button>
      }
      @if (editable) {
        <button mat-menu-item  (click)="openEditItemTemplateDialog(itemTemplate)">
          <mat-icon>edit</mat-icon>
          Éditer
        </button>
      }
      @if (hasAction('addItem')) {
        <button mat-menu-item
          (click)="emitAction('addItem', itemTemplate)">
          <mat-icon>add</mat-icon>
          Ajouter sur...
        </button>
      }
    </ng-template>
  </mat-menu>
</mat-card-header>
<mat-card-content>
  <app-item-template-details [itemTemplate]="itemTemplate"
    [jobsName]="jobsName"
    [godsByTechName]="godsByTechName"
    [originsName]="originsName">
  </app-item-template-details>
</mat-card-content>
</mat-card>
