@for (loggroup of history; track loggroup) {
  <div>
    {{loggroup.date | date:'mediumDate'}}
    <div style="padding-bottom: 5px; margin-left: 10px; padding-left: 10px; padding-top: 5px; border-left: 1px solid #E2D7D7">
      @for (log of loggroup.logs; track log) {
        <div>
          {{log.date | date:'shortTime'}}:
          <!-- GROUP -->
          <span>
            @switch (log.action) {
              @case ('EVENT_RP') {
                {{log.info}}
              }
              @case ('MANKDEBOL') {
                Mankdebol: {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('DEBILIBEUK') {
                Debilibeuk: {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('END_COMBAT') {
                Fin de combat
              }
              @case ('START_COMBAT') {
                Debut d'un combat
              }
              @case ('ADD_TIME') {
                Modification du temps: {{log.data.offset | nhbkDuration}}
              }
              @case ('CHANGE_DATE') {
                Modification de la date
                @if (log.data.oldValue) {
                  <div style="padding-left: 20px">Ancienne date: <date [date]="log.data.oldValue"></date></div>
                }
                <div style="padding-left: 20px">Nouvelle date: <date [date]="log.data.newValue"></date></div>
              }
              @default {
                {{log.action}}: {{log.info}}
              }
            }
          </span>
          <!-- Character -->
          <span>
            @switch (log.action) {
              @case ('EQUIP') {
                Equipe: {{log.item?.name}}
              }
              @case ('UNEQUIP') {
                Désquipe: {{log.item?.name}}
              }
              @case ('ADD_ITEM') {
                Ajout de l'objet: {{log.item?.name}}
              }
              @case ('READ_BOOK') {
                Lecture du livre: {{log.item?.name}}
              }
              @case ('DELETE_ITEM') {
                Suppression de l'objet: {{log.item?.name}}
              }
              @case ('APPLY_EFFECT') {
                Ajout de l'effet: {{log.effect.name}}
              }
              @case ('ACTIVE_EFFECT') {
                Activation de l'effet: {{log.effect.name}}
              }
              @case ('DISABLE_EFFECT') {
                Desactivation de l'effet: {{log.effect.name}}
              }
              @case ('ACTIVE_MODIFIER') {
                Activation du modificateur: {{log.modifier.name}}
              }
              @case ('DISABLE_MODIFIER') {
                Desactivation du modificateur: {{log.modifier.name}}
              }
              @case ('APPLY_MODIFIER') {
                Ajout du modificateur: {{log.modifier.name}}
              }
              @case ('REMOVE_MODIFIER') {
                Suppression du modificateur: {{log.modifier.name}}
              }
              @case ('CHANGE_QUANTITY') {
                Modification quantité: {{log.item?.name}} {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('USE_CHARGE') {
                Utilisation de charge: {{log.item?.name}} {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('REMOVE_EFFECT') {
                Suppression de l'effet: {{log.effect?.name}}
              }
              @case ('ADD_XP') {
                Ajout d'experience: {{log.info}}
              }
              @case ('LEVEL_UP') {
                Level Up: {{log.info}}
              }
              @case ('USE_FATE_POINT') {
                Utilisation d'un point de destin
              }
              @case ('MODIFY_EV') {
                Modification EV: {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('MODIFY_EA') {
                Modification EA: {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('MANKDEBOL') {
                Mankdebol: {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('DEBILIBEUK') {
                Debilibeuk: {{log.data.oldValue}} -> {{log.data.newValue}}
              }
              @case ('IDENTIFY') {
                Identification de l'objet: {{log.item?.name}}
              }
              @case ('LOOT_ITEM') {
                Loot de l'objet: {{log.item?.name}}
              }
              @default {
                {{log.action}}
              }
            }
          </span>
        </div>
      }
    </div>
  </div>
}
@if (loadMore) {
  <div>
    <button mat-button color="primary" (click)="loadHistory(true)" [disabled]="loading">CHARGER PLUS</button>
  </div>
}
